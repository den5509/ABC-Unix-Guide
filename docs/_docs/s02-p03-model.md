---
title: "Description of model"
permalink: /docs/s02-p03-model/
redirect_from:
  - /theme-setup/
toc: true
---
В соответствии c требованиями была составлена модель системы уведомлений для мобильного приложения, структурно-функциональная схема которой изображена на рисунке 1.

![alt]({{ "/assets/images/s02-app-model.png" | absolute_url }})

Рисунок 1 – Структурно-функциональная схема модели системы

## Описание модели системы уведомлений

Согласно модели, в мобильном приложении есть система уведомлений, оповещающая пользователя о появлении в интегрированных интернет-сервисах новых сообщений, отзывов, обновлений и прочих уведомлений. За процедуру проверки наличия уведомлений отвечает служба, которая работает в фоновом режиме.

Служба состоит из базы параметров, исполнительного модуля и системы адаптации.

Исполнительный модуль содержит методы для проверки уведомлений для каждого подключенного интернет-сервиса и использует их при получении управляющих команд от системы адаптации в соответствии со значениями в базе параметров.

База параметров содержит правила проверки уведомлений для каждого подключенного интернет-сервиса. Например, приоритет сервиса и максимальная задержка между проверками уведомлений.

Значения в базе параметров зависят от действий, совершаемых пользователем, настроек приложения и информации о ходе работы исполнительного модуля.

Событияи действия, приводящие к изменению параметров, бывают активными, то есть требующими немедленной обработки и вычисления новых параметров.

К таким относятся действия пользователя, такие как: подключение сервиса, удаление сервиса, изменение настроек приложенияи другие. Со стороны исполнительного модуля к активным относятся события, возникающие при сбое одного из интернет-сервисов.

Также системой обрабатываются события, неоказывающие высокого влияния на значения параметров работы службы и не требующие немедленного вычисления новых параметров. Такие события называются пассивными. Система производит статистику по таким событиям и, через определенные промежутки времени, принимает решение о вычислении новых параметров. К таким данным могут относиться, например, время использования интернет-сервиса, количество использованных интернет-сервисами ресурсов при проведении процедуры проверки, частота появления уведомленийи другие.

Значения новых параметров вычисляются системой адаптации, структурно-функциональная схема которой изображена на рисунке 2.

![alt]({{ "/assets/images/s02-adaptive-system.png" | absolute_url }})

Рисунок 2 – Структурно-функциональная схема системы адаптации

## Описание системы адаптации

Система адаптации состоит из модуля анализа, модуля статистики, модуля регулированияи базы статистики.

Модуль статистики отвечает за обработку пассивных действий пользователя и исполнительного модуля. При поступлении информации о совершенных таких действиях, модуль статистики считывает имеющие отношение к ним значения из базы статистики, вычисляет новые значения и записывает обратно в базу статистики.

Значения в базе статистики используются при вычислении параметров работы исполнительного модуля. Для каждого интернет-сервиса записывается два экземпляра наборов значений. В первом хранятся параметры статистики, по которым были вычислены актуальные параметры работы исполнительного модуля. Во втором находятся значения, обновляемые модулем статистики при совершении пользователем или исполнительным модулем пассивных действий.

Значения в базе статистики отражают информацию о том, как используется каждый интернет-сервис. Например, количество запусков интернет-сервиса и количество полученных уведомлений.

Также в базе хранятся значения потребляемых каждым интернет-сервисом ресурсов при проверке наличия уведомлений. Например, среднее время отработки и средний потребляемый трафик.

Запуск процедуры адаптации производит модуль анализа. В модуле присутствует таймер, после срабатывания которого, происходит сравнение значений базы статистики и, при определенном отклонении, производится запуск алгоритма адаптации.

При поступлении на модуль анализа информациио активных действиях пользователя или исполнительного модуля, алгоритм адаптации запускается мгновенно.

Изменение параметров работы исполнительного модуля выполняет модуль регулирования. Он вычисляет новые параметры работы службы и отправляет команды исполнительному модулю.

## Алгоритм адаптации исполнительного модуля к новым параметрам

1) производится остановка таймера в модуле анализа;

2) модуль регулирования отправляет команду остановки исполняющему модулю;

3) производится замена значений активных параметров в базе статистики новыми, вычисленными модулем статистики вовремя работы службы;

4) модуль регулирования производит вычисление новых параметров работы службы, используя настройки приложенияи значения активных параметров в базе статистики;

5) замена значений в базе параметров вычисленными модулем регулирования;

6) модуль регулирования отправляет команду запуска исполняющему модулю;

7) производится запуск таймера в модуле анализа.


После этого служба проверки наличия уведомлений продолжает работу по новым параметрам.
